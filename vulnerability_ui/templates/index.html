<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CipherGuard - AI Security Scanner</title>
  <link rel="stylesheet" href="/static/css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <div class="app-container">
    <!-- Main Content -->
    <main class="main-content">
      <!-- Hero Section -->
      <div class="hero-section">
        <!-- Shield Icon -->
        <div class="shield-icon">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 6c1.4 0 2.8 1.1 2.8 2.5V11c.6.2 1.2.8 1.2 1.5v3c0 .8-.7 1.5-1.5 1.5h-5c-.8 0-1.5-.7-1.5-1.5v-3c0-.7.5-1.3 1.2-1.5V9.5C9.2 8.1 10.6 7 12 7zm0 1.2c-.8 0-1.5.5-1.5 1.3v1.5h3V9.5c0-.8-.7-1.3-1.5-1.3z"/>
          </svg>
        </div>
        
        <!-- Title -->
        <h1 class="app-title">CipherGuard</h1>
        
        <!-- Gemini Badge -->
        <div class="gemini-badge" id="geminiBadge">
          <i class="fas fa-spinner fa-spin"></i>
          <span>Connecting to Gemini AI...</span>
        </div>
        
        <!-- Subtitle -->
        <p class="app-subtitle">Intelligent security analysis for folders and GitHub repositories</p>
      </div>

      <!-- Scan Card -->
      <div class="scan-card">
        <form id="scanForm" class="scan-form">
          <!-- URL Input -->
          <div class="input-group">
            <label for="repo">
              <i class="fas fa-crosshairs"></i>
              Target Path or GitHub URL
            </label>
            <input type="text" id="repo" name="repo" 
                   placeholder="https://github.com/NicholasDarwin/CipherGuard/tree/main" 
                   required>
          </div>
          
          <!-- Severity Select -->
          <div class="input-group">
            <label for="severity">
              <i class="fas fa-filter"></i>
              Min Severity:
            </label>
            <div class="select-wrapper">
              <select id="severity" name="severity">
                <option value="quick">Low+ (Quick Scan)</option>
                <option value="standard">Medium+ (Standard)</option>
                <option value="high" selected>High+ (Deep Scan + AI)</option>
              </select>
              <i class="fas fa-chevron-down select-arrow"></i>
            </div>
          </div>
          
          <!-- Scan Button -->
          <button type="button" id="scanBtn" class="scan-button">
            <i class="fas fa-robot"></i>
            <span>Start AI Scan</span>
          </button>
        </form>
      </div>

      <!-- Results Section (Initially Hidden) -->
      <section id="resultsSection" class="results-section" style="display: none;">
        
        <!-- Loading State -->
        <div id="loadingState" class="loading-state">
          <div class="loading-spinner">
            <div class="spinner-ring"></div>
            <i class="fas fa-shield-halved spinner-icon"></i>
          </div>
          <h2 id="loadingTitle">Initializing scan...</h2>
          <p id="loadingSub">Preparing security analysis</p>
          
          <div id="progressContainer" class="progress-container"></div>
          <div id="fileList" class="file-list"></div>
        </div>

        <!-- Completed Results -->
        <div id="completedResults" class="completed-results" style="display: none;">
          
          <!-- Stats Grid -->
          <div id="statsGrid" class="stats-grid"></div>
          
          <!-- Action Buttons -->
          <div class="action-buttons">
            <button class="action-btn" onclick="copyResults()">
              <i class="fas fa-copy"></i> Copy Results
            </button>
            <button class="action-btn" id="toggleRawJson">
              <i class="fas fa-code"></i> View Raw JSON
            </button>
            <button class="action-btn primary" onclick="resetScan()">
              <i class="fas fa-plus"></i> New Scan
            </button>
          </div>

          <!-- Findings Container -->
          <div class="findings-section">
            <h3 class="findings-title">
              <i class="fas fa-list-check"></i> Detailed Findings
            </h3>
            <div id="findingsContainer" class="findings-container"></div>
            
            <!-- No Findings Message -->
            <div id="noFindings" class="no-findings" style="display: none;">
              <i class="fas fa-check-circle"></i>
              <h3>All Clear!</h3>
              <p>No security vulnerabilities detected in this repository.</p>
            </div>
          </div>

          <!-- AI Summary Section -->
          <div id="aiSummarySection" class="ai-summary-section" style="display: none;">
            <h3 class="ai-summary-title">
              <i class="fas fa-robot"></i> AI Security Analysis
            </h3>
            <div id="aiSummaryContent" class="ai-summary-content"></div>
          </div>

          <!-- Raw JSON Panel -->
          <div id="rawJsonPanel" class="raw-json-panel" style="display: none;">
            <pre id="rawJson"></pre>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="app-footer">
      <p>CipherGuard - AI-Powered Vulnerability Scanner v2.0 - Using Google Gemini AI</p>
    </footer>
  </div>

  <script src="/static/js/main.js"></script>
  <!-- Vercel Web Analytics -->
  <script defer src="https://vercel.com/analytics/script.js"></script>
</body>
</html>
